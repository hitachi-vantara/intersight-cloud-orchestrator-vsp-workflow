[{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"Storage target device.","Label":"Storage Target Datatype","Name":"StorageTargetDataType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"CustomDataTypeProperties":{"ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage target device.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[{"ConnectorAttribute":"RegisteredDevice.Moid","ConstraintAttributes":["ObjectType","ApiVersion"],"DisplayAttributes":["Name","SvpIp","Vendor"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/search/SearchItems?$filter=(IndexMotypes eq storage.BaseArray)&$orderby=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"SupportedObjects":["storage.PureArray","storage.HitachiArray","storage.NetAppCluster"]}],"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"Volume name.","Label":"Storage Volume","Name":"StorageVolumeNameType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume name","Name":"VolumeName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":254,"Min":1,"ObjectType":"workflow.Constraints","Regex":"^[a-zA-Z0-9]+([_a-zA-Z0-9-]*[a-zA-Z0-9])*$"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/search/SearchItems?$filter=(((IndexMotypes eq storage.BaseVolume) and ( ObjectType ne storage.NetAppLun)) or (IndexMotypes eq storage.BaseStorageContainer) )&$orderby=Name&$select=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Name"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Description":"Storage capacity.","Label":"Storage Capacity","Name":"StorageCapacityType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Size must be a number (used in conjunction with unit).","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Size","Name":"VolumeSize","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":19,"Min":1,"ObjectType":"workflow.Constraints","Regex":"[0-9]{1,19}"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Unit is a string with a single character unit symbol. Valid unit symbols are K, M, G, T, and P representing Bytes, Kilobyte, Megabyte, Gigabyte, Terabyte, and Petabyte respectively, where one Kilobyte equals 1024 Bytes, one Megabyte equals 1048576 Bytes and so on.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Unit","Name":"VolumeUnit","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"KiB","ObjectType":"workflow.EnumEntry","Value":"K"},{"Label":"MiB","ObjectType":"workflow.EnumEntry","Value":"M"},{"Label":"GiB","ObjectType":"workflow.EnumEntry","Value":"G"},{"Label":"TiB","ObjectType":"workflow.EnumEntry","Value":"T"},{"Label":"PiB","ObjectType":"workflow.EnumEntry","Value":"P"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Label":"Hitachi Storage Volume Specs","Name":"HitachiStorageVolumeSpecs","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"user","Tags":[{"Key":"category","Value":"Storage"}],"TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"Volume","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVolumeNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Capacity","Name":"StorageCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageCapacityType","ObjectType":"workflow.CustomDataProperty"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","Description":"Platform(s) supported for storage target devices.","Label":"Storage Platform Type","Name":"StoragePlatformType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Platform type for storage target device.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"Radio"},"Label":"Storage Platform Type","Name":"StoragePlatformType","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[{"Label":"Pure FlashArray","ObjectType":"workflow.EnumEntry","Value":"storage.PureArray"},{"Label":"Hitachi Virtual Storage Platform","ObjectType":"workflow.EnumEntry","Value":"storage.HitachiArray"},{"Label":"NetApp Active IQ Unified Manager","ObjectType":"workflow.EnumEntry","Value":"storage.NetAppCluster"},{"Label":"None","ObjectType":"workflow.EnumEntry","Value":"None"}],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"enum"}}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Description":"Storage vendor expand volume capacity.","Label":"Storage Vendor Expand Volume Capacity","Name":"StorageVendorExpandVolumeCapacityType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[{"Condition":"eq","ControlParameter":"PlatformType","EnableParameters":["AdditionalVolumeCapacity"],"Name":"show-hitachi","ObjectType":"workflow.ParameterSet","Value":"storage.HitachiArray"},{"Condition":"eq","ControlParameter":"PlatformType","EnableParameters":["ExpandedVolumeCapacity"],"Name":"show-pure","ObjectType":"workflow.ParameterSet","Value":"storage.PureArray"},{"Condition":"eq","ControlParameter":"PlatformType","EnableParameters":["ExpandedVolumeCapacity"],"Name":"show-netapp","ObjectType":"workflow.ParameterSet","Value":"storage.NetAppCluster"}],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Platform type of the storage device.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Platform Type","Name":"PlatformType","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StoragePlatformType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Volume size must be a number.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Expanded Volume Capacity","Name":"ExpandedVolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageCapacityType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Volume size must be a number.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Additional Volume Capacity","Name":"AdditionalVolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageCapacityType","ObjectType":"workflow.CustomDataProperty"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Description":"Storage vendor virtual machine name.","Label":"Storage Vendor Virtual Machine","Name":"StorageVendorVirtualMachineNameType","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[{"Condition":"eq","ControlParameter":"PlatformType","EnableParameters":["StorageVirtualMachineName"],"Name":"show-netapp","ObjectType":"workflow.ParameterSet","Value":"storage.NetAppCluster"}],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"shared","TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Platform type of the storage device.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Platform Type","Name":"PlatformType","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StoragePlatformType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"StorageVirtualMachineName can be between 1 and 47 characters long depending on the device target selected it may vary and with first character being alphanumeric or underscore (_) and containing alphanumeric characters and \".\", \"-\" or \"_\" allowed.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Virtual Machine","Name":"StorageVirtualMachineName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":47,"Min":1,"ObjectType":"workflow.Constraints","Regex":"[0-9A-z_][-A-z0-9._]*"},"InventorySelector":[{"DisplayAttributes":["Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/NetAppStorageVms?$orderby=Name&$select=Name","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Name"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Expand a volume with volume name and size as inputs. On successful execution, volume name and size are generated as outputs.","Label":"Expand Storage Volume","Name":"ExpandStorageVolume","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Volume name must be between 1 and 63 alpha-numeric characters, and depending on the device target selected the limit may vary. The first and last character must be alphanumeric and name may also contain hyphen (-) character.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVolumeNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage vendor expand volume capacity.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"InputParameters":{"PlatformType":"${workflow.inputDataType.StorageTargetDataType.ObjectType}"},"Label":"Storage Vendor Expand Volume Capacity","Name":"StorageVendorExpandVolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVendorExpandVolumeCapacityType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage vendor virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"InputParameters":{"PlatformType":"${workflow.inputDataType.StorageTargetDataType.ObjectType}"},"Label":"Storage Vendor Virtual Machine","Name":"StorageVendorVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVendorVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVolumeNameType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume Capacity","Name":"VolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageCapacityType","ObjectType":"workflow.CustomDataProperty"}}],"RetryCount":3,"RetryDelay":30,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[],"SharedScope":"shared","Tags":[{"Key":"category","Value":"Storage"},{"Key":"platformType.HitachiVirtualStoragePlatform","Value":"true"},{"Key":"platformType.NetAppActiveIqUnifiedManager","Value":"true"},{"Key":"platformType.PureStorageFlashArray","Value":"true"}],"Version":3},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.WorkflowDefinition","DefaultVersion":true,"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"ArrayItemType":{"ObjectType":"workflow.CustomArrayItem","Properties":{"CatalogMoid":"user","CustomDataTypeName":"HitachiStorageVolumeSpecs","ObjectType":"workflow.CustomDataProperty"}},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume Specs","Max":1000,"Min":1,"Name":"VolumeSpecs","ObjectType":"workflow.ArrayDataType","Required":true}],"InputParameterSet":[],"Label":"Hitachi Storage Expand Volumes","Name":"HitachiStorageExpandVolumes","ObjectType":"workflow.WorkflowDefinition","OutputDefinition":[],"Properties":{"EnableDebug":true,"ObjectType":"workflow.WorkflowProperties","Retryable":true,"SupportStatus":"Supported"},"SharedScope":"user","Tags":[{"Key":"category","Value":"Storage"}],"Tasks":[{"Name":"StartTask","NextTask":"parallelLoop1","ObjectType":"workflow.StartTask"},{"Name":"SuccessEndTask","ObjectType":"workflow.SuccessEndTask"},{"Name":"FailureEndTask","ObjectType":"workflow.FailureEndTask"},{"Count":"{{len .global.workflow.input.VolumeSpecs}}","Description":"A Parallel Loop is a control task that runs one task or one sub-workflow multiple times based on a specified count.  The count can be a static value that is specified during design time or a dynamic value that is derived from workflow inputs or task outputs.  When the loop is executed, the count 'N' is determined, N tasks or sub-workflows are scheduled for execution in parallel.  When all N instances of the task or sub-workflow reach a final state the parallel loop will complete and workflow execution will move on to the next task.  If any one of the tasks or sub-workflows fails, then the entire loop will fail.  Dynamic values for count must be specified as a template.  For example, if a loop must run for a count which matches the length of a workflow input called StringArray, then the count must be specified using a template '{{ len .global.workflow.input.StringArray }}'.  The iteration of the loop is available using the keyword '.iteration' and it can be used to control inputs that feed into the task.  For example, the task inside the loop needs to take one value from the workflow input StringArray, then the task string input can be mapped to the template '{{ index .global.workflow.input.StringArray .iteration}}' during design.","Label":"Parallel Loop","LoopStartTask":"ExpandStorageVolume1","Name":"parallelLoop1","NumberOfBatches":1,"ObjectType":"workflow.LoopTask","OnSuccess":"SuccessEndTask","Parallel":true},{"CatalogMoid":"shared","Description":"Expand a volume with volume name and size as inputs. On successful execution, volume name and size are generated as outputs.","InputParameters":{"StorageDevice":"${workflow.input.StorageDevice}","StorageVendorExpandVolumeCapacity":{"AdditionalVolumeCapacity":{"VolumeSize":"{{(index .global.workflow.input.VolumeSpecs .iteration).StorageCapacity.VolumeSize}}","VolumeUnit":"{{(index .global.workflow.input.VolumeSpecs .iteration).StorageCapacity.VolumeUnit}}"},"PlatformType":"storage.HitachiArray"},"StorageVendorVirtualMachineName":{"PlatformType":"storage.HitachiArray"},"VolumeName":"{{(index .global.workflow.input.VolumeSpecs .iteration).Volume}}"},"Label":"Expand Storage Volume","Name":"ExpandStorageVolume1","ObjectType":"workflow.WorkerTask","TaskDefinitionName":"ExpandStorageVolume","Version":3}],"UiInputFilters":[],"UiRenderingData":{"Positions":[{"Name":"StartTask","X":275,"Y":75},{"Name":"SuccessEndTask","X":275,"Y":352.4500095329772},{"Name":"FailureEndTask","X":415,"Y":352.4500095329772},{"Name":"parallelLoop1","X":180,"Y":145},{"Name":"ExpandStorageVolume1","X":190,"Y":237}]},"VariableDefinition":[],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/WorkflowDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.ErrorResponseHandler","Name":"PureArrayApiErrorResponseHandler","ObjectType":"workflow.ErrorResponseHandler","Parameters":[{"AcceptSingleValue":true,"ComplexType":"Error","ItemType":"complex","Name":"Errors","ObjectType":"content.Parameter","Path":"$","Type":"collection"}],"PlatformType":"PureStorageFlashArray","SharedScope":"shared","Types":[{"Name":"Error","ObjectType":"content.ComplexType","Parameters":[{"ItemType":"simple","Name":"Ctx","ObjectType":"content.Parameter","Path":"$.ctx","Type":"simple"},{"ItemType":"simple","Name":"Msg","ObjectType":"content.Parameter","Path":"$.msg","Type":"simple"},{"ItemType":"simple","Name":"ErrorCode","ObjectType":"content.Parameter","Path":"$.pure_err_code","Type":"simple"}]}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/ErrorResponseHandlers","Verb":"POST"},{"Body":{"ClassId":"workflow.ErrorResponseHandler","Name":"NetAppApiErrorResponseHandler","ObjectType":"workflow.ErrorResponseHandler","Parameters":[{"AcceptSingleValue":true,"ComplexType":"Error","ItemType":"complex","Name":"Errors","ObjectType":"content.Parameter","Path":"$","Type":"collection"}],"PlatformType":"NetAppActiveIqUnifiedManager","SharedScope":"shared","Types":[{"Name":"Error","ObjectType":"content.ComplexType","Parameters":[{"ItemType":"simple","Name":"Msg","ObjectType":"content.Parameter","Path":"$.error.message","Type":"simple"},{"ItemType":"simple","Name":"ErrorCode","ObjectType":"content.Parameter","Path":"$.error.code","Type":"simple"}]}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/ErrorResponseHandlers","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Expand a FlashArray volume.","InterfaceTask":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"ExpandStorageVolume\" and Version eq 3"},"Label":"Expand FlashArray Volume","Name":"ExpandFlashArrayVolume","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Volume name must be between 1 and 63 alpha-numeric characters, and depending on the device target selected the limit may vary. The first and last character must be alphanumeric and name may also contain hyphen (-) character.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVolumeNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage vendor expand volume capacity.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"InputParameters":{"PlatformType":"${workflow.inputDataType.StorageTargetDataType.ObjectType}"},"Label":"Storage Vendor Expand Volume Capacity","Name":"StorageVendorExpandVolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVendorExpandVolumeCapacityType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage vendor virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"InputParameters":{"PlatformType":"${workflow.inputDataType.StorageTargetDataType.ObjectType}"},"Label":"Storage Vendor Virtual Machine","Name":"StorageVendorVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVendorVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVolumeNameType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume Capacity","Name":"VolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageCapacityType","ObjectType":"workflow.CustomDataProperty"}}],"RetryCount":3,"RetryDelay":30,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[],"SharedScope":"shared","Tags":[{"Key":"platformType.PureStorageFlashArray","Value":"true"}],"Version":3},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Expand a volume with volume name and size as inputs. On successful execution, volume name and size are generated as outputs.","InterfaceTask":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"ExpandStorageVolume\" and Version eq 3"},"Label":"Expand Hitachi Volume","Name":"ExpandHitachiVolume","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Volume name must be between 1 and 63 alpha-numeric characters, and depending on the device target selected the limit may vary. The first and last character must be alphanumeric and name may also contain hyphen (-) character.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVolumeNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage vendor expand volume capacity.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"InputParameters":{"PlatformType":"${workflow.inputDataType.StorageTargetDataType.ObjectType}"},"Label":"Storage Vendor Expand Volume Capacity","Name":"StorageVendorExpandVolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVendorExpandVolumeCapacityType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage vendor virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"InputParameters":{"PlatformType":"${workflow.inputDataType.StorageTargetDataType.ObjectType}"},"Label":"Storage Vendor Virtual Machine","Name":"StorageVendorVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVendorVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVolumeNameType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume Capacity","Name":"VolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageCapacityType","ObjectType":"workflow.CustomDataProperty"}}],"RetryCount":3,"RetryDelay":30,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[],"SharedScope":"shared","Tags":[{"Key":"platformType.HitachiVirtualStoragePlatform","Value":"true"}],"Version":3},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Expand a NetApp volume with volume name, storage virtual machine name and size as the inputs. On successful execution name and size of the expanded volume are generated as outputs.","InterfaceTask":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"ExpandStorageVolume\" and Version eq 3"},"Label":"Expand NetApp Volume","Name":"ExpandNetAppVolume","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Volume name must be between 1 and 63 alpha-numeric characters, and depending on the device target selected the limit may vary. The first and last character must be alphanumeric and name may also contain hyphen (-) character.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVolumeNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage vendor expand volume capacity.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"InputParameters":{"PlatformType":"${workflow.inputDataType.StorageTargetDataType.ObjectType}"},"Label":"Storage Vendor Expand Volume Capacity","Name":"StorageVendorExpandVolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVendorExpandVolumeCapacityType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage vendor virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"InputParameters":{"PlatformType":"${workflow.inputDataType.StorageTargetDataType.ObjectType}"},"Label":"Storage Vendor Virtual Machine","Name":"StorageVendorVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVendorVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVolumeNameType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume Capacity","Name":"VolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageCapacityType","ObjectType":"workflow.CustomDataProperty"}}],"RetryCount":3,"RetryDelay":30,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[],"SharedScope":"shared","Tags":[{"Key":"platformType.NetAppActiveIqUnifiedManager","Value":"true"}],"Version":3},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Expand a FlashArray volume2x.","InterfaceTask":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"ExpandStorageVolume\" and Version eq 3"},"Label":"Expand FlashArray Volume2x","Name":"ExpandFlashArrayVolume2x","ObjectType":"workflow.TaskDefinition","Properties":{"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Volume name must be between 1 and 63 alpha-numeric characters, and depending on the device target selected the limit may vary. The first and last character must be alphanumeric and name may also contain hyphen (-) character.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVolumeNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage vendor expand volume capacity.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"InputParameters":{"PlatformType":"${workflow.inputDataType.StorageTargetDataType.ObjectType}"},"Label":"Storage Vendor Expand Volume Capacity","Name":"StorageVendorExpandVolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVendorExpandVolumeCapacityType","ObjectType":"workflow.CustomDataProperty"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"Storage vendor virtual machine name.","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"InputParameters":{"PlatformType":"${workflow.inputDataType.StorageTargetDataType.ObjectType}"},"Label":"Storage Vendor Virtual Machine","Name":"StorageVendorVirtualMachineName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVendorVirtualMachineNameType","ObjectType":"workflow.CustomDataProperty"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume","Name":"VolumeName","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageVolumeNameType","ObjectType":"workflow.CustomDataProperty"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Volume Capacity","Name":"VolumeCapacity","ObjectType":"workflow.CustomDataType","Properties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageCapacityType","ObjectType":"workflow.CustomDataProperty"}}],"RetryCount":3,"RetryDelay":30,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":60,"TimeoutPolicy":"Retry"},"RollbackTasks":[],"SharedScope":"shared","Tags":[{"Key":"platformType.PureStorageFlashArray","Value":"true"}],"Version":3},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"Batch":[{"Body":"{\"size\": \"{{.global.task.input.StorageVendorExpandVolumeCapacity.ExpandedVolumeCapacity.VolumeSize}}{{.global.task.input.StorageVendorExpandVolumeCapacity.ExpandedVolumeCapacity.VolumeUnit}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"PUT","Name":"ExpandFlashArrayVolume","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.ExpandFlashArrayVolume.output.HttpStatusCode 401}}","Message":"Invalid credentials. Please check the username and password for connecting to the endpoint.","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{and (ge .global.ExpandFlashArrayVolume.output.HttpStatusCode 400) (lt .global.ExpandFlashArrayVolume.output.HttpStatusCode 600)}}","Error":true,"Message":"{{if .global.ExpandFlashArrayVolume.output.Errors}}{{$err := (index .global.ExpandFlashArrayVolume.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.Ctx}}: {{end}}{{$err.Msg}}{{else}}{{.global.ExpandFlashArrayVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome"},{"Condition":"true","Message":"Volume expanded successfully.","ObjectType":"workflow.Outcome"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeName","ObjectType":"content.Parameter","Path":"$.name","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeSize","ObjectType":"content.Parameter","Path":"$.size","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/volume/{{.global.task.input.VolumeName | TrimSpace }}"},{"Body":"{\"Type\":\"storage.PureVolume\",\"NamingProperty\":\"Name\",\"Values\": [\"{{.global.task.input.VolumeName}}\"],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"Volume expanded successfully","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[],"Types":[]},"TargetType":"Local","Url":"/v1/task/PureScopedInventories"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ApiVersion":"1","ObjectType":"storage.PureArray"}},"Description":"Expand a FlashArray Volume.","ErrorResponseHandler":{"ObjectType":"workflow.ErrorResponseHandler","Selector":"Name eq \"PureArrayApiErrorResponseHandler\""},"Name":"ExpandFlashArrayVolume","ObjectType":"workflow.BatchApiExecutor","Output":{"VolumeCapacity":"{{.global.task.input.StorageVendorExpandVolumeCapacity.ExpandedVolumeCapacity | ToJson}}","VolumeName":"{{.global.ExpandFlashArrayVolume.output.VolumeName}}"},"RetryFromFailedApi":true,"SharedScope":"shared","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"ExpandFlashArrayVolume\" and Version eq 3"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"Body":"{{if eq .global.task.input.StorageVendorExpandVolumeCapacity.AdditionalVolumeCapacity.VolumeUnit \"P\"}}{\"parameters\":{\"additionalByteFormatCapacity\": \"{{$size:= Atoi ((Eval \"{{.global.task.input.StorageVendorExpandVolumeCapacity.AdditionalVolumeCapacity.VolumeSize}} * 1024\" .)|ToJson)}}{{$unit:= \"T\"}}{{$size}}{{$unit}}\"}} {{else}}{\"parameters\":{\"additionalByteFormatCapacity\": \"{{.global.task.input.StorageVendorExpandVolumeCapacity.AdditionalVolumeCapacity.VolumeSize}}{{.global.task.input.StorageVendorExpandVolumeCapacity.AdditionalVolumeCapacity.VolumeUnit}}\"}}{{end}}","ContentType":"json","EndpointRequestType":"Internal","Headers":{"Response-Job-Status":["Completed"]},"Method":"PUT","Name":"ExpandHitachiVolume","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{(eq .global.ExpandHitachiVolume.output.HttpStatusCode 503) }}","Error":true,"Message":"HTTP Status code: {{.global.ExpandHitachiVolume.output.HttpStatusCode}}: {{if .global.ExpandHitachiVolume.output.Errors}}{ {{range $k, $v := .global.ExpandHitachiVolume.output.Errors}}[{{$k}}]: \"{{$v}}\" {{end}}}{{else}}REST API server or the storage system is busy. Try again later.{{end}}","ObjectType":"workflow.Outcome"},{"Condition":"{{and (ge .global.ExpandHitachiVolume.output.HttpStatusCode 400) (lt .global.ExpandHitachiVolume.output.HttpStatusCode 600)}}","Error":true,"Message":"HTTP Status code: {{.global.ExpandHitachiVolume.output.HttpStatusCode}}: {{if .global.ExpandHitachiVolume.output.Errors}}{ {{range $k, $v := .global.ExpandHitachiVolume.output.Errors}}[{{$k}}]: \"{{$v}}\" {{end}}}{{else}}Http error.{{end}}","ObjectType":"workflow.Outcome"},{"Condition":"{{ ContainsString .global.ExpandHitachiVolume.output.State \"Failed\" }}","Error":true,"Message":"The state of the job is \"Failed\". {{if .global.ExpandHitachiVolume.output.Errors}}{ {{range $k, $v := .global.ExpandHitachiVolume.output.Errors}}[{{$k}}]: \"{{$v}}\" {{end}}}{{end}}","ObjectType":"workflow.Outcome"},{"Condition":"{{ ContainsString .global.ExpandHitachiVolume.output.State \"Unknown\" }}","Error":true,"Message":"The state of the job is \"Unknown\".","ObjectType":"workflow.Outcome"},{"Condition":"{{ ContainsString .global.ExpandHitachiVolume.output.State \"Succeeded\" }}","Message":"Volume expanded successfully.","ObjectType":"workflow.Outcome"},{"Condition":"true","Error":true,"Message":"Unexpected internal error.","ObjectType":"workflow.Outcome"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeId","ObjectType":"content.Parameter","Path":"$.affectedResources[0]","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"State","ObjectType":"content.Parameter","Path":"$.state","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"CompletedTime","ObjectType":"content.Parameter","Path":"$.completedTime","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Errors","ObjectType":"content.Parameter","Path":"$","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/ConfigurationManager/v1/objects/storages/{STORAGEDEVICEID}/ldevs/{{.global.task.input.VolumeName}}/actions/expand/invoke"},{"Body":"{\"Type\":\"storage.HitachiVolume\",\"NamingProperty\":\"Name\",\"Values\": [\"{{.global.task.input.VolumeName}}\"],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"Volume expanded successfully.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[],"Types":[]},"TargetType":"Local","Url":"/v1/task/HitachiScopedInventories"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetObject","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{(eq .global.GetObject.output.HttpStatusCode 200) }}","Message":"Volume expanded successfully.","ObjectType":"workflow.Outcome"},{"Condition":"true","Error":true,"Message":"HTTP Status code: {{.global.GetObject.output.HttpStatusCode}}: {{if .global.GetObject.output.Errors}}{ {{range $k, $v := .global.GetObject.output.Errors}}[{{$k}}]: \"{{$v}}\" {{end}}}{{else}}Http error.{{end}}","ObjectType":"workflow.Outcome"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Errors","ObjectType":"content.Parameter","Path":"$","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Size","ObjectType":"content.Parameter","Path":"$.byteFormatCapacity","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/ConfigurationManager/v1/objects/storages/{STORAGEDEVICEID}/ldevs/{{.global.task.input.VolumeName}}"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ObjectType":"storage.HitachiArray"}},"Description":"Expand a Hitachi volume.","Name":"ExpandHitachiVolume","ObjectType":"workflow.BatchApiExecutor","Output":{"VolumeCapacity":"{\"VolumeSize\":{{(index (FindAllString .global.GetObject.output.Size \"^[0-9]+([.][0-9]+)?\") 0)}},\"VolumeUnit\":{{(index (FindAllString .global.GetObject.output.Size \"[A-Z]\") 0)|ToJson}}}","VolumeName":"{{index (FindAllString .global.ExpandHitachiVolume.output.VolumeId \"([^/]+)$\") 0}}"},"RetryFromFailedApi":true,"SharedScope":"shared","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"ExpandHitachiVolume\" and Version eq 3"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetClusterUuid","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID successful.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.GetClusterUuid.output.HttpStatusCode 200}}","Message":"Get Cluster UUID failed","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Uuid","ObjectType":"content.Parameter","Path":"$.Uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Local","Url":"/v1/storage/NetAppClusters/{{.global.task.input.StorageDevice.Moid}}?$select=Uuid"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetNetAppVolumeDetails","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetNetAppVolumeDetails.output.HttpStatusCode 400) (le .global.GetNetAppVolumeDetails.output.HttpStatusCode 499)}}","Message":"{{if .global.GetNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetNetAppVolumeDetails.output.HttpStatusCode 500)}}","Message":"{{if .global.GetNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetNetAppVolumeDetails.output.HttpStatusCode 501) (le .global.GetNetAppVolumeDetails.output.HttpStatusCode 599)}}","Message":"{{if .global.GetNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{ (eq .global.GetNetAppVolumeDetails.output.HttpStatusCode 200) }}","Message":"Volume details retrieved successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeUuid","ObjectType":"content.Parameter","Path":"$.records[0].uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/volumes?name={{.global.task.input.VolumeName}}&svm.name={{.global.task.input.StorageVendorVirtualMachineName.StorageVirtualMachineName}}"},{"Body":"{\"size\": \"{{.global.task.input.StorageVendorExpandVolumeCapacity.ExpandedVolumeCapacity.VolumeSize}}{{.global.task.input.StorageVendorExpandVolumeCapacity.ExpandedVolumeCapacity.VolumeUnit}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"PATCH","Name":"ExpandVolume","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.ExpandVolume.output.HttpStatusCode 400) (le .global.ExpandVolume.output.HttpStatusCode 499)}}","Message":"{{if .global.ExpandVolume.output.Errors}}{{$err := (index .global.ExpandVolume.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.ExpandVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.ExpandVolume.output.HttpStatusCode 500)}}","Message":"{{if .global.ExpandVolume.output.Errors}}{{$err := (index .global.ExpandVolume.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.ExpandVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.ExpandVolume.output.HttpStatusCode 501) (le .global.ExpandVolume.output.HttpStatusCode 599)}}","Message":"{{if .global.ExpandVolume.output.Errors}}{{$err := (index .global.ExpandVolume.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.ExpandVolume.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{(eq .global.ExpandVolume.output.HttpStatusCode 200)}}}","Message":"Job ID created successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"JobUuid","ObjectType":"content.Parameter","Path":"$.job.uuid","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/volumes/{{.global.GetNetAppVolumeDetails.output.VolumeUuid}}?return_timeout=59"},{"Body":"{}","ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetJobDetail","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetJobDetail.output.HttpStatusCode 400)  (le .global.GetJobDetail.output.HttpStatusCode 499)}}","Message":"{{if .global.GetJobDetail.output.Errors}}{{$err := (index .global.GetJobDetail.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetJobDetail.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetJobDetail.output.HttpStatusCode 500)}}","Message":"{{if .global.GetJobDetail.output.Errors}}{{$err := (index .global.GetJobDetail.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetJobDetail.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetJobDetail.output.HttpStatusCode 501)  (le .global.GetJobDetail.output.HttpStatusCode 599)}}","Message":"{{if .global.GetJobDetail.output.Errors}}{{$err := (index .global.GetJobDetail.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetJobDetail.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{ ContainsString .global.GetJobDetail.output.JobState \"failure\" }}","Message":"HTTP Status code: {{.global.GetJobDetail.output.HttpStatusCode}}: {{if .global.GetJobDetail.output.JobMessage}} Job state: {{.global.GetJobDetail.output.JobState}} Message: {{.global.GetJobDetail.output.JobMessage}} CompletedTime: {{.global.GetJobDetail.output.CompletedTime}} {{ else }} Job status is \"Failed\"{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ ContainsString .global.GetJobDetail.output.JobState \"paused\" }}","Message":"HTTP Status code: {{.global.GetJobDetail.output.HttpStatusCode}}: {{if .global.GetJobDetail.output.JobMessage}} Job state: {{.global.GetJobDetail.output.JobState}} Message: {{.global.GetJobDetail.output.JobMessage}} CompletedTime: {{.global.GetJobDetail.output.CompletedTime}} {{ else }} Job status is \"Paused\"{{end}}","ObjectType":"workflow.Outcome","Type":"Status"},{"Condition":"{{ ContainsString .global.GetJobDetail.output.JobState \"queued\" }}","Message":"HTTP Status code: {{.global.GetJobDetail.output.HttpStatusCode}}: {{if .global.GetJobDetail.output.JobMessage}} Job state: {{.global.GetJobDetail.output.JobState}} Message: {{.global.GetJobDetail.output.JobMessage}} CompletedTime: {{.global.GetJobDetail.output.CompletedTime}} {{ else }} Job status is \"Queued\"{{end}}","ObjectType":"workflow.Outcome","Type":"Status"},{"Condition":"{{ ContainsString .global.GetJobDetail.output.JobState \"running\" }}","Message":"HTTP Status code: {{.global.GetJobDetail.output.HttpStatusCode}}: {{if .global.GetJobDetail.output.JobMessage}} Job state: {{.global.GetJobDetail.output.JobState}} Message: {{.global.GetJobDetail.output.JobMessage}} CompletedTime: {{.global.GetJobDetail.output.CompletedTime}} {{ else }} Job status is \"Running\"{{end}}","ObjectType":"workflow.Outcome","Type":"Status"},{"Condition":"{{ ContainsString .global.GetJobDetail.output.JobState \"success\" }}","Message":"Received Job status successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"JobState","ObjectType":"content.Parameter","Path":"$.state","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"CompletedTime","ObjectType":"content.Parameter","Path":"$.end_time","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"JobMessage","ObjectType":"content.Parameter","Path":"$.message","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/cluster/jobs/{{.global.ExpandVolume.output.JobUuid}}"},{"ContentType":"json","EndpointRequestType":"Internal","Method":"GET","Name":"GetExpandedNetAppVolumeDetails","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ and (ge .global.GetExpandedNetAppVolumeDetails.output.HttpStatusCode 400) (le .global.GetExpandedNetAppVolumeDetails.output.HttpStatusCode 499)}}","Message":"{{if .global.GetExpandedNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetExpandedNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetExpandedNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{(eq .global.GetExpandedNetAppVolumeDetails.output.HttpStatusCode 500)}}","Message":"{{if .global.GetExpandedNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetExpandedNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetExpandedNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{ and (ge .global.GetExpandedNetAppVolumeDetails.output.HttpStatusCode 501) (le .global.GetExpandedNetAppVolumeDetails.output.HttpStatusCode 599)}}","Message":"{{if .global.GetExpandedNetAppVolumeDetails.output.Errors}}{{$err := (index .global.GetExpandedNetAppVolumeDetails.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.ErrorCode}}: {{end}}{{$err.Msg}}{{else}}{{.global.GetExpandedNetAppVolumeDetails.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome","Type":"Error"},{"Condition":"{{ (eq .global.GetExpandedNetAppVolumeDetails.output.HttpStatusCode 200) }}","Message":"Volume expanded successfully.","ObjectType":"workflow.Outcome","Type":"Success"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeSize","ObjectType":"content.Parameter","Path":"$.records[0].size","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeUuid","ObjectType":"content.Parameter","Path":"$.records[0].uuid","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeName","ObjectType":"content.Parameter","Path":"$.records[0].name","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"AggregateUuid","ObjectType":"content.Parameter","Path":"$.records[0].aggregates[0].uuid","Secure":false,"Type":"simple"}],"Types":[]},"SkipOnCondition":"{{ ContainsString .global.GetJobDetail.output.JobState \"failure\" }}","TargetType":"Endpoint","Url":"/api/gateways/{{.global.GetClusterUuid.output.Uuid}}/storage/volumes?name={{.global.task.input.VolumeName}}&svm.name={{.global.task.input.StorageVendorVirtualMachineName.StorageVirtualMachineName}}&fields=size,aggregates"},{"Body":"{\"Type\":\"storage.NetAppCluster\",\"Queries\": [{\"Uuid\": \"{{.global.GetClusterUuid.output.Uuid}}\", \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}], \"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateClusterInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateClusterInventory.output.HttpStatusCode 200}}","Message":"Updated cluster after volume expansion.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateClusterInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateClusterInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"},{"Body":"{\"Type\":\"storage.NetAppAggregate\",\"Queries\": [{\"Uuid\": \"{{.global.GetExpandedNetAppVolumeDetails.output.AggregateUuid}}\",  \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}], \"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateAggregateInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateAggregateInventory.output.HttpStatusCode 200}}","Message":"Updated aggregate after volume expansion.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateAggregateInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateAggregateInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"},{"Body":"{\"Type\":\"storage.NetAppVolume\",\"Queries\": [{\"Uuid\": \"{{.global.GetExpandedNetAppVolumeDetails.output.VolumeUuid}}\",  \"ClusterUuid\": \"{{.global.GetClusterUuid.output.Uuid}}\"}],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateVolumeInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateVolumeInventory.output.HttpStatusCode 200}}","Message":"Volume expanded successfully.","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateVolumeInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateVolumeInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","TargetType":"Local","Url":"/v1/task/NetAppScopedInventories"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ObjectType":"storage.NetAppCluster"}},"Description":"Expand NetApp volume.","ErrorResponseHandler":{"ObjectType":"workflow.ErrorResponseHandler","Selector":"Name eq \"NetAppApiErrorResponseHandler\""},"Name":"ExpandNetAppVolume","ObjectType":"workflow.BatchApiExecutor","Output":{"VolumeCapacity":"{{.global.task.input.StorageVendorExpandVolumeCapacity.ExpandedVolumeCapacity | ToJson}}","VolumeName":"{{.global.GetExpandedNetAppVolumeDetails.output.VolumeName}}"},"RetryFromFailedApi":true,"SharedScope":"shared","SkipOnCondition":"{{if ne .global.task.input.StorageDevice.ObjectType \"storage.NetAppCluster\"}} true {{end}}","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"ExpandNetAppVolume\" and Version eq 3"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"},{"Body":{"Batch":[{"Body":"{\"provisioned\": \"{{.global.task.input.StorageVendorExpandVolumeCapacity.ExpandedVolumeCapacity.VolumeSize}}{{.global.task.input.StorageVendorExpandVolumeCapacity.ExpandedVolumeCapacity.VolumeUnit}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"PATCH","Name":"ExpandFlashArrayVolume2x","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.ExpandFlashArrayVolume2x.output.HttpStatusCode 401}}","Message":"Invalid credentials. Please check the username and password for connecting to the endpoint.","ObjectType":"workflow.Outcome","Type":"TerminalError"},{"Condition":"{{and (ge .global.ExpandFlashArrayVolume2x.output.HttpStatusCode 400) (lt .global.ExpandFlashArrayVolume2x.output.HttpStatusCode 600)}}","Error":true,"Message":"{{if .global.ExpandFlashArrayVolume2x.output.Errors}}{{$err := (index .global.ExpandFlashArrayVolume2x.output.Errors 0)}}{{if (index $err \"Ctx\")}}{{$err.Ctx}}: {{end}}{{$err.Msg}}{{else}}{{.global.ExpandFlashArrayVolume2x.output.HttpStatusMsg}}{{end}}","ObjectType":"workflow.Outcome"},{"Condition":"true","Message":"Volume expanded successfully.","ObjectType":"workflow.Outcome"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeName","ObjectType":"content.Parameter","Path":"$.items[0].name","Secure":false,"Type":"simple"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"VolumeSize","ObjectType":"content.Parameter","Path":"$.items[0].provisioned","Secure":false,"Type":"simple"}],"Types":[]},"TargetType":"Endpoint","Url":"/volumes?names={{.global.task.input.VolumeName | TrimSpace }}"},{"Body":"{\"Type\":\"storage.PureVolume\",\"NamingProperty\":\"Name\",\"Values\": [\"{{.global.task.input.VolumeName}}\"],\"RegisteredDevice\":\"{{.global.task.target.RegisteredDeviceMoid}}\"}","ContentType":"json","EndpointRequestType":"Internal","Method":"POST","Name":"UpdateInventory","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{eq .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"Volume expanded successfully","ObjectType":"workflow.Outcome"},{"Condition":"{{ne .global.UpdateInventory.output.HttpStatusCode 200}}","Message":"{{.global.UpdateInventory.output.HttpStatusMsg}}","ObjectType":"workflow.Outcome","Type":"Error"}],"Protocol":"https","ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[],"Types":[]},"TargetType":"Local","Url":"/v1/task/PureScopedInventories"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints","TargetDataType":{"ApiVersion":"2","ObjectType":"storage.PureArray"}},"Description":"Expand a FlashArray Volume2x.","ErrorResponseHandler":{"ObjectType":"workflow.ErrorResponseHandler","Selector":"Name eq \"PureArrayApiErrorResponseHandler\""},"Name":"ExpandFlashArrayVolume2x","ObjectType":"workflow.BatchApiExecutor","Output":{"VolumeCapacity":"{{.global.task.input.StorageVendorExpandVolumeCapacity.ExpandedVolumeCapacity | ToJson}}","VolumeName":"{{.global.ExpandFlashArrayVolume2x.output.VolumeName}}"},"RetryFromFailedApi":true,"SharedScope":"shared","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"ExpandFlashArrayVolume2x\" and Version eq 3"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"}]