[{"Body":{"ClassId":"workflow.CustomDataTypeDefinition","CompositeType":true,"Label":"Hitachi New Storage Host Group Parameters Remove","Name":"HitachiNewStorageHostGroupParametersRemove","ObjectType":"workflow.CustomDataTypeDefinition","ParameterSet":[],"Properties":{"ObjectType":"workflow.CustomDataTypeProperties"},"SharedScope":"user","Tags":[{"Key":"category","Value":"Storage"}],"TypeDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Host","Name":"HostName","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":254,"Min":1,"ObjectType":"workflow.Constraints","Regex":"^[a-zA-Z0-9]+([_a-zA-Z0-9-]*[a-zA-Z0-9])*$"},"InventorySelector":[{"DisplayAttributes":["Name","OsType"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/HitachiHosts","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"Name"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Host Group Number","Name":"HostGroupNumber","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"Max":255,"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["HostGroupNumber","Name"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/HitachiHosts","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"HostGroupNumber"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Port Id","Name":"PortId","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[{"DisplayAttributes":["PortId"],"ObjectType":"workflow.MoReferenceProperty","Selector":"/api/v1/storage/HitachiHosts?$apply=groupby((PortId),aggregate($count as count))&$orderby=PortId","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"ValueAttribute":"PortId"}],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}]},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/CustomDataTypeDefinitions","Verb":"POST"},{"Body":{"ClassId":"workflow.WorkflowDefinition","DefaultVersion":true,"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","CustomDataTypeName":"StorageTargetDataType","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Storage Device","Name":"StorageDevice","ObjectType":"workflow.TargetDataType","Properties":[],"Required":true},{"ArrayItemType":{"ObjectType":"workflow.CustomArrayItem","Properties":{"CatalogMoid":"user","CustomDataTypeName":"HitachiNewStorageHostGroupParametersRemove","ObjectType":"workflow.CustomDataProperty"}},"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Hitachi Host Groups","Max":500,"Min":1,"Name":"HitachiHostGroups","ObjectType":"workflow.ArrayDataType","Required":true}],"InputParameterSet":[],"Label":"Remove Hitachi Host Group_Batch_Update","Name":"RemoveHitachiHostGroup_Batch_y","ObjectType":"workflow.WorkflowDefinition","OutputDefinition":[],"Properties":{"EnableDebug":true,"ObjectType":"workflow.WorkflowProperties","PublishStatus":"Draft","SupportStatus":"Supported"},"SharedScope":"user","Tasks":[{"Name":"StartTask","NextTask":"parallelLoop1","ObjectType":"workflow.StartTask"},{"Name":"SuccessEndTask","ObjectType":"workflow.SuccessEndTask"},{"Name":"FailureEndTask","ObjectType":"workflow.FailureEndTask"},{"Count":"{{len .global.workflow.input.HitachiHostGroups}}","Description":"A Parallel Loop is a control task that runs one task or one sub-workflow multiple times based on a specified count.  The count can be a static value that is specified during design time or a dynamic value that is derived from workflow inputs or task outputs.  When the loop is executed, the count 'N' is determined, N tasks or sub-workflows are scheduled for execution in parallel.  When all N instances of the task or sub-workflow reach a final state the parallel loop will complete and workflow execution will move on to the next task.  If any one of the tasks or sub-workflows fails, then the entire loop will fail.  Dynamic values for count must be specified as a template.  For example, if a loop must run for a count which matches the length of a workflow input called StringArray, then the count must be specified using a template '{{ len .global.workflow.input.StringArray }}'.  The iteration of the loop is available using the keyword '.iteration' and it can be used to control inputs that feed into the task.  For example, the task inside the loop needs to take one value from the workflow input StringArray, then the task string input can be mapped to the template '{{ index .global.workflow.input.StringArray .iteration}}' during design.","Label":"Parallel Loop","LoopStartTask":"RemoveStorageHost1","Name":"parallelLoop1","NumberOfBatches":1,"ObjectType":"workflow.LoopTask","OnSuccess":"SuccessEndTask","Parallel":true},{"CatalogMoid":"shared","Description":"Remove a storage host with host name as input. Storage host is the entity used to associate initiators to storage and expose as LUNs. Host can map to different terms for Storage vendors. For NetApp ONTAP storage this maps to iGroup. On successful execution, the host name deleted is generated as output.","InputParameters":{"HostName":"{{(index .global.workflow.input.HitachiHostGroups .iteration).HostName}}","StorageDevice":"${workflow.input.StorageDevice}","StorageVendorHostIdentifier":{"HitachiHostGroupParameters":{"HostGroupNumber":"{{ print (index .global.workflow.input.HitachiHostGroups .iteration).HostGroupNumber | Atoi}}","PortId":"{{(index .global.workflow.input.HitachiHostGroups .iteration).PortId}}"},"PlatformType":"storage.HitachiArray"},"StorageVendorVirtualMachineName":{"PlatformType":"storage.HitachiArray"}},"Label":"Remove Storage Host","Name":"RemoveStorageHost1","ObjectType":"workflow.WorkerTask","TaskDefinitionName":"RemoveStorageHost","Version":3}],"UiInputFilters":[],"UiRenderingData":{"Positions":[{"Name":"StartTask","X":275,"Y":74.5},{"Name":"SuccessEndTask","X":275,"Y":357.45000076293945},{"Name":"FailureEndTask","X":415,"Y":357.45000076293945},{"Name":"parallelLoop1","X":180,"Y":150},{"Name":"RemoveStorageHost1","X":193,"Y":243}]},"VariableDefinition":[],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/WorkflowDefinitions","Verb":"POST"}]